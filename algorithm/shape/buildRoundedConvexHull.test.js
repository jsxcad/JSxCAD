import { canonicalize, toPoints } from '@jsxcad/algorithm-polygons';
import { isWatertightPolygons } from '@jsxcad/algorithm-watertight';
import { unitCubePolygons } from '@jsxcad/data-shape';
import { buildRoundedConvexHull } from './buildRoundedConvexHull';
import { test } from 'ava';

test('Simple rounded cube', t => {
  const polygons = canonicalize(buildRoundedConvexHull({ roundRadius: 0.1 }, toPoints({}, unitCubePolygons)));
  t.true(isWatertightPolygons(polygons));
  t.deepEqual(polygons,
              [[[-0.6, -0.5, 0.5], [-0.6, 0.5, 0.5], [-0.6, 0.5, -0.5]], [[-0.6, -0.5, 0.5], [-0.6, 0.5, -0.5], [-0.6, -0.5, -0.5]], [[-0.5, 0.6, 0.5], [-0.5, 0.57071, 0.57071], [0.5, 0.57071, 0.57071]], [[-0.5, 0.6, 0.5], [0.5, 0.57071, 0.57071], [0.5, 0.6, 0.5]], [[-0.5, 0.6, 0.5], [0.5, 0.6, 0.5], [0.5, 0.6, -0.5]], [[-0.5, 0.6, 0.5], [0.5, 0.6, -0.5], [-0.5, 0.6, -0.5]], [[0.6, 0.5, -0.5], [0.6, 0.5, 0.5], [0.6, -0.5, 0.5]], [[0.6, 0.5, -0.5], [0.6, -0.5, 0.5], [0.6, -0.5, -0.5]], [[0.5, 0.57071, -0.57071], [0.55, 0.55, -0.57071], [0.5, 0.5, -0.6]], [[0.5, 0.57071, -0.57071], [-0.5, 0.57071, -0.57071], [-0.5, 0.6, -0.5]], [[0.5, 0.57071, -0.57071], [-0.5, 0.6, -0.5], [0.5, 0.6, -0.5]], [[0.57071, 0.5, -0.57071], [0.57071, -0.5, -0.57071], [0.5, -0.5, -0.6]], [[0.57071, 0.5, -0.57071], [0.5, -0.5, -0.6], [0.5, 0.5, -0.6]], [[0.57071, 0.5, -0.57071], [0.5, 0.5, -0.6], [0.55, 0.55, -0.57071]], [[0.57071, 0.5, -0.57071], [0.6, 0.5, -0.5], [0.6, -0.5, -0.5]], [[0.57071, 0.5, -0.57071], [0.6, -0.5, -0.5], [0.57071, -0.5, -0.57071]], [[0.57071, 0.57071, -0.5], [0.55, 0.55, -0.57071], [0.5, 0.57071, -0.57071]], [[0.57071, 0.57071, -0.5], [0.5, 0.57071, -0.57071], [0.5, 0.6, -0.5]], [[0.57071, 0.57071, -0.5], [0.5, 0.6, -0.5], [0.5, 0.6, 0.5]], [[0.57071, 0.57071, -0.5], [0.5, 0.6, 0.5], [0.57071, 0.57071, 0.5]], [[0.57071, 0.57071, -0.5], [0.57071, 0.57071, 0.5], [0.6, 0.5, 0.5]], [[0.57071, 0.57071, -0.5], [0.6, 0.5, 0.5], [0.6, 0.5, -0.5]], [[0.57071, 0.57071, -0.5], [0.6, 0.5, -0.5], [0.57071, 0.5, -0.57071]], [[0.57071, 0.57071, -0.5], [0.57071, 0.5, -0.57071], [0.55, 0.55, -0.57071]], [[0.55, -0.55, -0.57071], [0.57071, -0.5, -0.57071], [0.6, -0.5, -0.5]], [[0.55, -0.55, -0.57071], [0.6, -0.5, -0.5], [0.57071, -0.57071, -0.5]], [[0.55, -0.55, -0.57071], [0.57071, -0.57071, -0.5], [0.5, -0.6, -0.5]], [[0.55, -0.55, -0.57071], [0.5, -0.6, -0.5], [0.5, -0.57071, -0.57071]], [[0.55, -0.55, -0.57071], [0.5, -0.57071, -0.57071], [0.5, -0.5, -0.6]], [[0.55, -0.55, -0.57071], [0.5, -0.5, -0.6], [0.57071, -0.5, -0.57071]], [[-0.5, -0.57071, -0.57071], [-0.5, -0.5, -0.6], [0.5, -0.5, -0.6]], [[-0.5, -0.57071, -0.57071], [0.5, -0.5, -0.6], [0.5, -0.57071, -0.57071]], [[-0.57071, -0.5, 0.57071], [-0.55, -0.55, 0.57071], [-0.5, -0.5, 0.6]], [[-0.57071, -0.5, 0.57071], [-0.57071, 0.5, 0.57071], [-0.6, 0.5, 0.5]], [[-0.57071, -0.5, 0.57071], [-0.6, 0.5, 0.5], [-0.6, -0.5, 0.5]], [[-0.57071, -0.5, 0.57071], [-0.6, -0.5, 0.5], [-0.57071, -0.57071, 0.5]], [[-0.57071, -0.5, 0.57071], [-0.57071, -0.57071, 0.5], [-0.55, -0.55, 0.57071]], [[-0.55, 0.55, 0.57071], [-0.57071, 0.57071, 0.5], [-0.6, 0.5, 0.5]], [[-0.55, 0.55, 0.57071], [-0.6, 0.5, 0.5], [-0.57071, 0.5, 0.57071]], [[-0.55, 0.55, 0.57071], [-0.5, 0.57071, 0.57071], [-0.5, 0.6, 0.5]], [[-0.55, 0.55, 0.57071], [-0.5, 0.6, 0.5], [-0.57071, 0.57071, 0.5]], [[-0.5, -0.57071, 0.57071], [-0.5, -0.5, 0.6], [-0.55, -0.55, 0.57071]], [[0.5, -0.5, 0.6], [-0.5, -0.5, 0.6], [-0.5, -0.57071, 0.57071]], [[0.5, -0.5, 0.6], [-0.5, -0.57071, 0.57071], [0.5, -0.57071, 0.57071]], [[0.5, -0.5, 0.6], [0.5, -0.57071, 0.57071], [0.55, -0.55, 0.57071]], [[-0.57071, 0.5, -0.57071], [-0.57071, -0.5, -0.57071], [-0.6, -0.5, -0.5]], [[-0.57071, 0.5, -0.57071], [-0.6, -0.5, -0.5], [-0.6, 0.5, -0.5]], [[-0.5, 0.5, -0.6], [0.5, 0.5, -0.6], [0.5, -0.5, -0.6]], [[-0.5, 0.5, -0.6], [0.5, -0.5, -0.6], [-0.5, -0.5, -0.6]], [[-0.5, 0.5, -0.6], [-0.5, -0.5, -0.6], [-0.57071, -0.5, -0.57071]], [[-0.5, 0.5, -0.6], [-0.57071, -0.5, -0.57071], [-0.57071, 0.5, -0.57071]], [[-0.5, 0.5, -0.6], [-0.57071, 0.5, -0.57071], [-0.55, 0.55, -0.57071]], [[-0.5, 0.5, -0.6], [-0.55, 0.55, -0.57071], [-0.5, 0.57071, -0.57071]], [[-0.5, 0.5, -0.6], [-0.5, 0.57071, -0.57071], [0.5, 0.57071, -0.57071]], [[-0.5, 0.5, -0.6], [0.5, 0.57071, -0.57071], [0.5, 0.5, -0.6]], [[-0.57071, 0.57071, -0.5], [-0.57071, 0.57071, 0.5], [-0.5, 0.6, 0.5]], [[-0.57071, 0.57071, -0.5], [-0.5, 0.6, 0.5], [-0.5, 0.6, -0.5]], [[-0.57071, 0.57071, -0.5], [-0.5, 0.6, -0.5], [-0.5, 0.57071, -0.57071]], [[-0.57071, 0.57071, -0.5], [-0.5, 0.57071, -0.57071], [-0.55, 0.55, -0.57071]], [[-0.57071, 0.57071, -0.5], [-0.55, 0.55, -0.57071], [-0.57071, 0.5, -0.57071]], [[-0.57071, 0.57071, -0.5], [-0.57071, 0.5, -0.57071], [-0.6, 0.5, -0.5]], [[-0.57071, 0.57071, -0.5], [-0.6, 0.5, -0.5], [-0.6, 0.5, 0.5]], [[-0.57071, 0.57071, -0.5], [-0.6, 0.5, 0.5], [-0.57071, 0.57071, 0.5]], [[0.57071, -0.5, 0.57071], [0.5, -0.5, 0.6], [0.55, -0.55, 0.57071]], [[0.57071, 0.5, 0.57071], [0.5, 0.5, 0.6], [0.5, -0.5, 0.6]], [[0.57071, 0.5, 0.57071], [0.5, -0.5, 0.6], [0.57071, -0.5, 0.57071]], [[0.57071, 0.5, 0.57071], [0.57071, -0.5, 0.57071], [0.6, -0.5, 0.5]], [[0.57071, 0.5, 0.57071], [0.6, -0.5, 0.5], [0.6, 0.5, 0.5]], [[0.57071, -0.57071, 0.5], [0.55, -0.55, 0.57071], [0.5, -0.57071, 0.57071]], [[0.57071, -0.57071, 0.5], [0.5, -0.57071, 0.57071], [0.5, -0.6, 0.5]], [[0.57071, -0.57071, 0.5], [0.5, -0.6, 0.5], [0.5, -0.6, -0.5]], [[0.57071, -0.57071, 0.5], [0.5, -0.6, -0.5], [0.57071, -0.57071, -0.5]], [[0.57071, -0.57071, 0.5], [0.57071, -0.57071, -0.5], [0.6, -0.5, -0.5]], [[0.57071, -0.57071, 0.5], [0.6, -0.5, -0.5], [0.6, -0.5, 0.5]], [[0.57071, -0.57071, 0.5], [0.6, -0.5, 0.5], [0.57071, -0.5, 0.57071]], [[0.57071, -0.57071, 0.5], [0.57071, -0.5, 0.57071], [0.55, -0.55, 0.57071]], [[-0.57071, -0.57071, -0.5], [-0.57071, -0.57071, 0.5], [-0.6, -0.5, 0.5]], [[-0.57071, -0.57071, -0.5], [-0.6, -0.5, 0.5], [-0.6, -0.5, -0.5]], [[-0.5, 0.5, 0.6], [-0.5, -0.5, 0.6], [0.5, -0.5, 0.6]], [[-0.5, 0.5, 0.6], [0.5, -0.5, 0.6], [0.5, 0.5, 0.6]], [[-0.5, 0.5, 0.6], [0.5, 0.5, 0.6], [0.5, 0.57071, 0.57071]], [[-0.5, 0.5, 0.6], [0.5, 0.57071, 0.57071], [-0.5, 0.57071, 0.57071]], [[-0.5, 0.5, 0.6], [-0.5, 0.57071, 0.57071], [-0.55, 0.55, 0.57071]], [[-0.5, 0.5, 0.6], [-0.55, 0.55, 0.57071], [-0.57071, 0.5, 0.57071]], [[-0.5, 0.5, 0.6], [-0.57071, 0.5, 0.57071], [-0.57071, -0.5, 0.57071]], [[-0.5, 0.5, 0.6], [-0.57071, -0.5, 0.57071], [-0.5, -0.5, 0.6]], [[0.55, 0.55, 0.57071], [0.5, 0.57071, 0.57071], [0.5, 0.5, 0.6]], [[0.55, 0.55, 0.57071], [0.5, 0.5, 0.6], [0.57071, 0.5, 0.57071]], [[0.55, 0.55, 0.57071], [0.57071, 0.5, 0.57071], [0.6, 0.5, 0.5]], [[0.55, 0.55, 0.57071], [0.6, 0.5, 0.5], [0.57071, 0.57071, 0.5]], [[0.55, 0.55, 0.57071], [0.57071, 0.57071, 0.5], [0.5, 0.6, 0.5]], [[0.55, 0.55, 0.57071], [0.5, 0.6, 0.5], [0.5, 0.57071, 0.57071]], [[-0.5, -0.6, -0.5], [-0.5, -0.57071, -0.57071], [0.5, -0.57071, -0.57071]], [[-0.5, -0.6, -0.5], [0.5, -0.57071, -0.57071], [0.5, -0.6, -0.5]], [[-0.55, -0.55, -0.57071], [-0.5, -0.57071, -0.57071], [-0.5, -0.6, -0.5]], [[-0.55, -0.55, -0.57071], [-0.5, -0.6, -0.5], [-0.57071, -0.57071, -0.5]], [[-0.55, -0.55, -0.57071], [-0.57071, -0.57071, -0.5], [-0.6, -0.5, -0.5]], [[-0.55, -0.55, -0.57071], [-0.6, -0.5, -0.5], [-0.57071, -0.5, -0.57071]], [[-0.55, -0.55, -0.57071], [-0.57071, -0.5, -0.57071], [-0.5, -0.5, -0.6]], [[-0.55, -0.55, -0.57071], [-0.5, -0.5, -0.6], [-0.5, -0.57071, -0.57071]], [[-0.5, -0.6, 0.5], [-0.57071, -0.57071, 0.5], [-0.57071, -0.57071, -0.5]], [[-0.5, -0.6, 0.5], [-0.57071, -0.57071, -0.5], [-0.5, -0.6, -0.5]], [[-0.5, -0.6, 0.5], [-0.5, -0.6, -0.5], [0.5, -0.6, -0.5]], [[-0.5, -0.6, 0.5], [0.5, -0.6, -0.5], [0.5, -0.6, 0.5]], [[-0.5, -0.6, 0.5], [0.5, -0.6, 0.5], [0.5, -0.57071, 0.57071]], [[-0.5, -0.6, 0.5], [0.5, -0.57071, 0.57071], [-0.5, -0.57071, 0.57071]], [[-0.5, -0.6, 0.5], [-0.5, -0.57071, 0.57071], [-0.55, -0.55, 0.57071]], [[-0.5, -0.6, 0.5], [-0.55, -0.55, 0.57071], [-0.57071, -0.57071, 0.5]]]);
});
